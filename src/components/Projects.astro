---
import type { Translations } from '../i18n';

interface Props {
  t: Translations;
}

const { t } = Astro.props;

const featuredProjects = [
  {
    title: 'Denser',
    description: t.projects.descriptions.denser,
    tags: ['Next.js', 'TypeScript', 'Blockchain', 'Playwright'],
    link: 'https://github.com/openhive-network/denser',
    type: 'Commercial',
    metrics: { commits: '1300+', contributors: '16+' },
  },
  {
    title: 'ConqSite',
    description: t.projects.descriptions.conqsite,
    tags: ['Next.js', 'MongoDB', 'Discord API', 'NextAuth'],
    link: 'https://conqsite.bard-dev.com',
    type: 'Open Source',
    metrics: { users: '500+', features: '20+' },
  },
];

const otherProjects = [
  {
    title: 'Elysia Backend',
    description: t.projects.descriptions.elysiaBackend,
    tags: ['Bun', 'Elysia', 'MongoDB'],
    link: 'https://github.com/KKocot/elysia-backend',
    type: 'Backend',
  },
  {
    title: 'Shopping List',
    description: t.projects.descriptions.shoppingList,
    tags: ['React Native', 'Expo'],
    link: 'https://github.com/KKocot/shopping-list',
    type: 'Mobile',
  },
  {
    title: 'Excel Reader',
    description: t.projects.descriptions.excelReader,
    tags: ['React', 'TypeScript'],
    link: 'https://github.com/KKocot/excel-reader',
    type: 'Tool',
  },
  {
    title: 'Stasiak Opał',
    description: t.projects.descriptions.stasiakOpal,
    tags: ['Astro', 'Tailwind'],
    link: 'https://stasiak-opal.pl',
    type: 'Client',
  },
  {
    title: 'Flashcards',
    description: t.projects.descriptions.flashcards,
    tags: ['React', 'TypeScript'],
    link: 'https://github.com/KKocot/flashcards',
    type: 'Education',
  },
];

const typeColors: Record<string, string> = {
  'Commercial': 'bg-emerald-500/20 text-emerald-400 border-emerald-500/30',
  'Open Source': 'bg-orange-500/20 text-orange-400 border-orange-500/30',
  'Backend': 'bg-violet-500/20 text-violet-400 border-violet-500/30',
  'Mobile': 'bg-pink-500/20 text-pink-400 border-pink-500/30',
  'Tool': 'bg-cyan-500/20 text-cyan-400 border-cyan-500/30',
  'Client': 'bg-blue-500/20 text-blue-400 border-blue-500/30',
  'Education': 'bg-amber-500/20 text-amber-400 border-amber-500/30',
};
---

<section id="projects" class="py-24 lg:py-32">
  <div class="max-w-[1200px] mx-auto px-6">
    <!-- Header -->
    <div class="text-center mb-16">
      <span class="section-tag">{t.projects.tag}</span>
      <h2 class="section-title">{t.projects.title}</h2>
    </div>

    <!-- Featured Projects -->
    <div class="grid lg:grid-cols-2 gap-6 mb-8">
      {featuredProjects.map((project, index) => (
        <a
          href={project.link}
          target="_blank"
          rel="noopener noreferrer"
          class="group block p-6 lg:p-8 rounded-2xl transition-all duration-300 hover:-translate-y-1 animate-on-scroll"
          style={`background: rgba(250, 250, 250, 0.03); border: 1px solid rgba(250, 250, 250, 0.08); transition-delay: ${index * 100}ms`}
        >
          <!-- Header -->
          <div class="flex items-start justify-between mb-4">
            <div>
              <span class={`inline-block text-[10px] font-semibold uppercase tracking-wider px-2 py-1 rounded border mb-3 ${typeColors[project.type]}`}>
                {project.type}
              </span>
              <h3 class="text-xl lg:text-2xl font-bold text-white group-hover:text-[#ff8833] transition-colors">
                {project.title}
              </h3>
            </div>
            <span class="text-white/30 group-hover:text-[#ff8833] group-hover:translate-x-1 transition-all text-xl">→</span>
          </div>

          <!-- Description -->
          <p class="text-sm leading-relaxed mb-6" style="color: rgba(250, 250, 250, 0.6);">
            {project.description}
          </p>

          <!-- Metrics -->
          <div class="flex gap-6 mb-6">
            {Object.entries(project.metrics).map(([key, value]) => (
              <div>
                <div class="text-lg font-bold text-white">{value}</div>
                <div class="text-xs capitalize" style="color: rgba(250, 250, 250, 0.4);">{key}</div>
              </div>
            ))}
          </div>

          <!-- Tags -->
          <div class="flex flex-wrap gap-2">
            {project.tags.map((tag) => (
              <span class="text-xs px-2 py-1 rounded" style="color: rgba(250, 250, 250, 0.5); background: rgba(250, 250, 250, 0.05);">
                {tag}
              </span>
            ))}
          </div>
        </a>
      ))}
    </div>

    <!-- Other Projects Grid -->
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {otherProjects.map((project, index) => (
        <a
          href={project.link}
          target="_blank"
          rel="noopener noreferrer"
          class="group block p-5 rounded-xl transition-all duration-300 hover:-translate-y-1 animate-on-scroll"
          style={`background: rgba(250, 250, 250, 0.02); border: 1px solid rgba(250, 250, 250, 0.06); transition-delay: ${(index + 2) * 50}ms`}
        >
          <!-- Header -->
          <div class="flex items-center justify-between mb-3">
            <span class={`text-[10px] font-semibold uppercase tracking-wider px-2 py-0.5 rounded border ${typeColors[project.type]}`}>
              {project.type}
            </span>
            <span class="text-white/20 group-hover:text-[#ff8833] group-hover:translate-x-0.5 transition-all text-sm">→</span>
          </div>

          <!-- Title -->
          <h3 class="text-base font-semibold text-white group-hover:text-[#ff8833] transition-colors mb-2">
            {project.title}
          </h3>

          <!-- Description -->
          <p class="text-xs leading-relaxed mb-4" style="color: rgba(250, 250, 250, 0.5);">
            {project.description}
          </p>

          <!-- Tags -->
          <div class="flex flex-wrap gap-1.5">
            {project.tags.map((tag) => (
              <span class="text-[10px] px-1.5 py-0.5 rounded" style="color: rgba(250, 250, 250, 0.4); background: rgba(250, 250, 250, 0.04);">
                {tag}
              </span>
            ))}
          </div>
        </a>
      ))}
    </div>

    <!-- CTA -->
    <div class="text-center mt-12">
      <a
        href="https://github.com/KKocot"
        target="_blank"
        rel="noopener noreferrer"
        class="btn btn-outline"
      >
        {t.projects.viewAll}
      </a>
    </div>
  </div>
</section>
