---
import type { Translations } from '../i18n';

interface Props {
  t: Translations;
}

const { t } = Astro.props;

interface ProjectLink {
  label: string;
  url: string;
  primary?: boolean;
}

interface FeaturedProject {
  title: string;
  description: string;
  tags: string[];
  type: string;
  links: ProjectLink[];
}

interface Project {
  title: string;
  description: string;
  tags: string[];
  type: string;
  links: ProjectLink[];
}

const featuredProjects: FeaturedProject[] = [
  {
    title: 'Denser',
    description: t.projects.descriptions.denser,
    tags: ['Next.js', 'TypeScript', 'Hive Blockchain', 'Playwright', 'Turbo'],
    type: 'Commercial',
    links: [
      { label: 'GitHub', url: 'https://github.com/openhive-network/denser' },
      { label: 'Blog', url: 'https://blog.openhive.network', primary: true },
      { label: 'Wallet', url: 'https://wallet.openhive.network', primary: true },
    ],
  },
  {
    title: 'ConqSite',
    description: t.projects.descriptions.conqsite,
    tags: ['Next.js', 'MongoDB', 'Discord API', 'NextAuth', 'Tailwind'],
    type: 'Full-Stack App',
    links: [
      { label: 'Live', url: 'https://conqsite.bard-dev.com', primary: true },
    ],
  },
];

const otherProjects: Project[] = [
  {
    title: 'Elysia Backend',
    description: t.projects.descriptions.elysiaBackend,
    tags: ['Bun', 'Elysia', 'MongoDB', 'Zod'],
    type: 'Backend',
    links: [
      { label: 'API', url: 'https://api.bard-dev.com', primary: true },
    ],
  },
  {
    title: 'Shopping List',
    description: t.projects.descriptions.shoppingList,
    tags: ['React Native', 'Expo', 'TypeScript'],
    type: 'Mobile',
    links: [
      { label: 'GitHub', url: 'https://github.com/KKocot/shopping-list' },
    ],
  },
  {
    title: 'Excel Reader',
    description: t.projects.descriptions.excelReader,
    tags: ['React', 'TypeScript', 'Recharts'],
    type: 'Tool',
    links: [
      { label: 'GitHub', url: 'https://github.com/KKocot/excel-reader' },
      { label: 'Live', url: 'https://excel-reader.bard-dev.com', primary: true },
    ],
  },
  {
    title: 'Stasiak Opał',
    description: t.projects.descriptions.stasiakOpal,
    tags: ['Astro', 'Tailwind', 'SEO'],
    type: 'Client',
    links: [
      { label: 'Live', url: 'https://stasiak-opal.pl', primary: true },
    ],
  },
  {
    title: 'Flashcards',
    description: t.projects.descriptions.flashcards,
    tags: ['React', 'TypeScript', 'LocalStorage'],
    type: 'Education',
    links: [
      { label: 'GitHub', url: 'https://github.com/KKocot/flashcards' },
      { label: 'Live', url: 'https://flashcards.bard-dev.com', primary: true },
    ],
  },
];

const typeColors: Record<string, string> = {
  'Commercial': 'bg-emerald-500/20 text-emerald-400 border-emerald-500/30',
  'Full-Stack App': 'bg-orange-500/20 text-orange-400 border-orange-500/30',
  'Backend': 'bg-violet-500/20 text-violet-400 border-violet-500/30',
  'Mobile': 'bg-pink-500/20 text-pink-400 border-pink-500/30',
  'Tool': 'bg-cyan-500/20 text-cyan-400 border-cyan-500/30',
  'Client': 'bg-blue-500/20 text-blue-400 border-blue-500/30',
  'Education': 'bg-amber-500/20 text-amber-400 border-amber-500/30',
};
---

<section id="projects" class="py-24 lg:py-32">
  <div class="max-w-[1200px] mx-auto px-6">
    <!-- Header -->
    <div class="text-center mb-16">
      <span class="section-tag">{t.projects.tag}</span>
      <h2 class="section-title">{t.projects.title}</h2>
    </div>

    <!-- Featured Projects -->
    <div class="grid lg:grid-cols-2 gap-6 mb-8">
      {featuredProjects.map((project, index) => (
        <article
          class="p-6 lg:p-8 rounded-2xl animate-on-scroll"
          style={`background: rgba(250, 250, 250, 0.03); border: 1px solid rgba(250, 250, 250, 0.08); transition-delay: ${index * 100}ms`}
        >
          <!-- Header -->
          <div class="flex items-start justify-between mb-4">
            <div>
              <span class={`inline-block text-[10px] font-semibold uppercase tracking-wider px-2 py-1 rounded border mb-3 ${typeColors[project.type]}`}>
                {project.type}
              </span>
              <h3 class="text-xl lg:text-2xl font-bold text-white">
                {project.title}
              </h3>
            </div>
          </div>

          <!-- Description -->
          <p class="text-sm leading-relaxed mb-6" style="color: rgba(250, 250, 250, 0.6);">
            {project.description}
          </p>

          <!-- Tags -->
          <div class="flex flex-wrap gap-2 mb-6">
            {project.tags.map((tag) => (
              <span class="text-xs px-2 py-1 rounded" style="color: rgba(250, 250, 250, 0.5); background: rgba(250, 250, 250, 0.05);">
                {tag}
              </span>
            ))}
          </div>

          <!-- Links -->
          <div class="flex flex-wrap gap-2">
            {project.links.map((link) => (
              <a
                href={link.url}
                target="_blank"
                rel="noopener noreferrer"
                class={`inline-flex items-center gap-1.5 text-xs font-medium px-3 py-1.5 rounded-full transition-all duration-200 hover:-translate-y-0.5 ${
                  link.primary
                    ? 'bg-[#ff8833] text-black hover:bg-[#ffaa66]'
                    : 'bg-white/10 text-white/70 hover:bg-white/15 hover:text-white'
                }`}
              >
                {link.label}
                <span class="text-[10px]">↗</span>
              </a>
            ))}
          </div>
        </article>
      ))}
    </div>

    <!-- Other Projects Grid -->
    <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {otherProjects.map((project, index) => (
        <article
          class="p-5 rounded-xl animate-on-scroll"
          style={`background: rgba(250, 250, 250, 0.02); border: 1px solid rgba(250, 250, 250, 0.06); transition-delay: ${(index + 2) * 50}ms`}
        >
          <!-- Header -->
          <div class="flex items-center justify-between mb-3">
            <span class={`text-[10px] font-semibold uppercase tracking-wider px-2 py-0.5 rounded border ${typeColors[project.type]}`}>
              {project.type}
            </span>
          </div>

          <!-- Title -->
          <h3 class="text-base font-semibold text-white mb-2">
            {project.title}
          </h3>

          <!-- Description -->
          <p class="text-xs leading-relaxed mb-4" style="color: rgba(250, 250, 250, 0.5);">
            {project.description}
          </p>

          <!-- Tags -->
          <div class="flex flex-wrap gap-1.5 mb-4">
            {project.tags.map((tag) => (
              <span class="text-[10px] px-1.5 py-0.5 rounded" style="color: rgba(250, 250, 250, 0.4); background: rgba(250, 250, 250, 0.04);">
                {tag}
              </span>
            ))}
          </div>

          <!-- Links -->
          <div class="flex flex-wrap gap-2">
            {project.links.map((link) => (
              <a
                href={link.url}
                target="_blank"
                rel="noopener noreferrer"
                class={`inline-flex items-center gap-1 text-[11px] font-medium px-2.5 py-1 rounded-full transition-all duration-200 hover:-translate-y-0.5 ${
                  link.primary
                    ? 'bg-[#ff8833] text-black hover:bg-[#ffaa66]'
                    : 'bg-white/10 text-white/60 hover:bg-white/15 hover:text-white'
                }`}
              >
                {link.label}
                <span class="text-[9px]">↗</span>
              </a>
            ))}
          </div>
        </article>
      ))}
    </div>

    <!-- CTA -->
    <div class="text-center mt-12">
      <a
        href="https://github.com/KKocot"
        target="_blank"
        rel="noopener noreferrer"
        class="btn btn-outline"
      >
        {t.projects.viewAll}
      </a>
    </div>
  </div>
</section>
